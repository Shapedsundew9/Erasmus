{
    "genomic_library_table": {
        "type": "string",
        "default": "genomic_library",
        "minlength": 1,
        "maxlength": 64,
        "regex": "[a-zA-Z0-9_-]+",
        "check_with": "valid_genomic_library_table",  
        "dependencies": ["tables"]      
    },
    "default_database": {
        "type": "string",
        "default": "erasums_db",
        "minlength": 1,
        "maxlength": 64,
        "regex": "[a-zA-Z0-9_-]+",
        "check_with": "valid_default_database",        
        "dependencies": ["databases"]      
    },
    "databases": {
        "type": "dict",
        "default": {
            "erasmus_db": {
                "recreate": false,
                "host": "localhost",
                "username": "postgres",
                "password": "postgres",
                "port": 5432                
            }
        },
        "keysrules": {
            "type": "string",
            "minlength": 1,
            "maxlength": 64,
            "regex": "[a-zA-Z-_0-9]*"
        },
        "valuesrules": {
            "type": "dict",
            "schema": {
                "recreate": {
                    "type": "boolean",
                    "default": false
                },
                "temp": {
                    "type": "boolean",
                    "default": false
                },
                "host": {
                    "type": "string",
                    "default": "localhost",
                    "regex": "(^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$|^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$)",
                    "meta":{
                        "description": "A valid RFC952 hostname or IP address."
                    }
                },
                "username": {
                    "type": "string",
                    "default": "postgres"
                },
                "password": {
                    "type": "string",
                    "default": "postgres"
                },
                "port": {
                    "type": "integer",
                    "default": 5432,
                    "min": 1024, "max": 65535
                }
            }
        }
    },
    "tables": {
        "type": "dict",
        "dependencies": ["default_database"],
        "keysrules": {
            "type": "string",
            "minlength": 1,
            "maxlength": 64,
            "regex": "[a-zA-Z0-9_-]+"
        },
        "valuesrules": {
            "type": "dict",
            "schema": {
                "database": {
                    "type": "string",
                    "minlength": 1,
                    "maxlength": 64,
                    "default_setter": "set_default_database",
                    "regex": "[a-zA-Z-_0-9]+",
                    "check_with": "valid_database",
                    "dependencies": "^default_database"
                },
                "format_file_folder": {
                    "type": "string",
                    "minlength": 1,
                    "maxlength": 1024,
                    "check_with": "valid_file_folder",
                    "default_setter": "set_format_file_folder"
                },
                "data_file_folder": {
                    "type": "string",
                    "minlength": 1,
                    "maxlength": 1024,
                    "check_with": "valid_file_folder",
                    "default_setter": "set_data_file_folder"
                },
                "format_file": {
                    "type": "string",
                    "minlength": 1,
                    "maxlength": 1024,
                    "required": true,
                    "check_with": "valid_format_file",
                    "dependencies": ["format_file_folder"]
                },
                "data_files": {
                    "type": "list",
                    "schema": {
                        "type": "string",
                        "minlength": 1,
                        "maxlength": 1024,
                        "required": false
                    },
                    "check_with": "valid_data_files",
                    "dependencies": ["data_file_folder", "format_file"]
                },
                "history_decimation": {
                    "type": "dict",
                    "default": {"enabled": false},
                    "schema": {
                        "enabled": {
                            "type": "boolean",
                            "default": false 
                        },
                        "phase_size": {
                            "type": "integer",
                            "min": 1,
                            "max": 32,
                            "default": 20
                        },
                        "num_phases": {
                            "type": "integer",
                            "min": 1,
                            "max": 256,
                            "default": 8
                        }
                    },
                    "meta":{
                        "description": "TBD"
                    }
                }
            }
        },
        "schema": {
            "genomic_library": {
                "type": "dict",
                "schema": {
                    "format_file": {
                        "default": "genomic_library_entry_format.json"
                    },
                    "data_files": {
                        "type": "list",
                        "schema": {
                            "default": [
                                "codons_logical.json",
                                "codons_arithmetic.json"
                            ]
                        }
                    }
                }
            },
            "work_registry": {
                "type": "dict",
                "schema": {
                    "format_file": {
                        "default": "work_registry_entry_format.json"
                    }
                }
            },
            "worker_registry": {
                "type": "dict",
                "schema": {
                    "format_file": {
                        "default": "worker_registry_entry_format.json"
                    }
                }
            },
            "work_log_template": {
                "type": "dict",
                "schema": {
                    "format_file": {
                        "default": "work_log_entry_format.json"
                    },
                    "history_decimation": {
                        "type": "dict",
                        "schema": {
                            "enabled": {
                                "type": "boolean",
                                "default": true 
                            }
                        }
                    }
                }
            },
            "platform_info": {
                "type": "dict",
                "schema": {
                    "format_file": {
                        "default": "platform_info_entry_format.json"
                    }
                }
            }
        }
    }
}